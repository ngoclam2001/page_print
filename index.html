<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/page_print/style.css">
    <script src="/page_print/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div class="container" id="main_content">
        <div class="top_info">
            <div class="img_top">
                <img src="/page_print/img_re.png" alt="logo">
            </div>
            <div class="text_center">
                <h1 class="text_top text_uppercase">thông tin quyền sử dụng đất,</h1>
                <h1 class="text_uppercase text_top">quyền sở hữu tài sản liên quan với đất</h1>
                <span class="fs-10">(Thông tin này được lấy từ mã QR in trên Giấy xác nhận)</span>
            </div>
            <div class="text_right fs-10 code_pdf">
                
            </div>
        </div>
        <div class="content">
            <ol class="list_info">
                <li class="text_bold fs-10">
                    Người sử dụng đất, chủ sử dụng tài sản gắn liền với đất:
                </li>
                <div class="list_person">
                    <!-- danh sach nguoi su dung -->
                </div>
                <li class="text_bold">
                    Thông tin thửa đất:
                </li>
                <!-- TH1: Giay chung nhan cap cho mot thua dat -->
                <div class="list_land land_first_case hide">
                    <!-- load from js -->
                </div>
                <!-- TH2: Giay chung nhan cho nhieu thua dat nong nghiep -->
                <div class="list_land land_second_case hide">
                    <!-- load from js -->
                </div>
                <li class="text_bold">
                    Thông tin tài sản gắn liền với đất:
                </li>
                <!-- Cac thong tin lien qan -->
                <div class="land_info_asset">
                    <!-- load from js -->
                </div>
                <!-- TH1: Giay chung nhan can ho hoac cong trinh -->
                <div class="first_case_asset">
                    <table class="table_asset_first">
                        <tbody>
                            <tr>
                                <th>
                                    <p>Tên tài sản</p>
                                </th>
                                <th>
                                    <p>Diện tích xây dựng(m2)</p>
                                </th>
                                <th>
                                    <p>Diện tích sử dụng(m2)</p>
                                </th>
                                <th>
                                    <p>Hình thức sở hữu</p>
                                </th>
                                <th>
                                    <p>Cấp công trình</p>
                                </th>
                                <th>
                                    <p>Thời hạn sở hữu</p>
                                </th>
                            </tr>
                            <!-- load from js -->
                        </tbody>
                    </table>
                </div>
                <!--TH2: Giay chung nhan can ho -->
                <div class="second_case_asset">
                    <table class="table_asset_second">
                        <tbody>
                            <tr>
                                <th>
                                    <p>Tên tài sản</p>
                                </th>
                                <th>
                                    <p>Diện tích sàn xây dựng(m2)</p>
                                </th>
                                <th>
                                    <p>Diện tích sử dụng(m2)</p>
                                </th>
                                <th>
                                    <p>Hình thức sở hữu</p>
                                </th>
                                <th>
                                    <p>Thời hạn sở hữu</p>
                                </th>
                            </tr>
                            <!-- load from js -->
                        </tbody>
                    </table>
                </div>
                <li class="text_bold" id="page2el">
                    Sơ đồ thửa đất, tài sản gắn liền với đất:
                </li>
                <div class="image_land">
                    <!-- load from js -->
                </div>
            </ol>
        </div>
    </div>
    <div class="btn_docx">
        <!-- <button id="downloadBtn">Tạo và tải xuống DOC</button> -->
        <button class="btn_print">Tạo và tải xuống PDF</button>
    </div>
</body>
<!-- load thong tin -->
<script>
    $(document).ready(function(){
        function load_data(){
            var data_land = {
                id: "AA 0987654",
                muc_1:{
                    1: {
                        person_name: "Nguyễn Văn A",
                        person_cccd: "231414141"
                    },
                    2: {
                        person_name: "Nguyễn Văn B",
                        person_cccd: "231414142"
                    },
                    3: {
                        person_name: "Nguyễn Văn C",
                        person_cccd: "231414143"
                    },
                },
                muc_2:{
                    0: {is_check: false},
                    1: {
                        land_number: "01",
                        land_map_number: "100m2",
                        land_area: "cac",
                        land_class: "abc",
                        land_use_date: "abc",
                        land_use: "abc",
                        land_address: "abc",
                        land_purpose: "abc"
                    },
                    2: {
                        land_number: "02",
                        land_map_number: "200m2",
                        land_area: "cac",
                        land_class: "abc",
                        land_use_date: "abc",
                        land_use: "abc",
                        land_address: "abc",
                        land_purpose: "abc"
                    },
                },
                muc_3:{
                    0: {is_check: false},
                    1: {
                    asset_name: "01",
                    asset_area: "100m2",
                    asset_area_use: "01",
                    asset_number_floor: "100m2",
                    asset_structure: "01",
                    asset_level: "100m2",
                    asset_use: "01",
                    asset_use_time: "100m2"
                    },
                    2: {
                        asset_name: "02",
                        asset_area: "200m2",
                        asset_area_use: "02",
                        asset_number_floor: "200m2",
                        asset_structure: "02",
                        asset_level: "200m2",
                        asset_use: "02",
                        asset_use_time: "200m2"
                    },
                },
                muc_4:{
                    // image: "/page_print/img_re.png",
                    0: "/page_print/img_re.png",
                }

            };
            //load id
            $('.code_pdf').append(data_land.id);

            //load muc 1
            var phan_1 = '';
            for (const key in data_land.muc_1) {
                phan_1+='<div class="person"><span class="person_name">'+data_land.muc_1[key].person_name+'</span>,<span class="person_cccd"> '+data_land.muc_1[key].person_cccd+'</span></div>'
            }
            $(".list_person").html(phan_1);

            //load muc 2
            var phan_2 = '';
            var table = '<div class="first_land_info"><p>a. Thừa đất số: <span class="land_number_s">'+data_land.muc_2[1].land_number+'</span></p><p>b. Diện tích: <span class="land_area_s">'+data_land.muc_2[1].land_number+'</span></p></div><p>c. Địa chỉ: <span class="land_address_all">'+data_land.muc_2[1].land_number+'</span></p><p>d. Danh sách các thửa đất:</p>';
            table+= '<table class="table_land"><tbody><tr><th><p>Tờ bản đồ số</p></th><th><p>Thửa đất số</p></th><th><p>Diện tích(m2)</p></th><th><p>Loại đất</p></th><th><p>Thời hạn sử dụng</p></th><th><p>Hình thức sử dụng</p> </th><th><p>Nguồn gốc sử dụng đất</p> </th><th><p>Địa chỉ</p> </th></tr>';
            for (const key in data_land.muc_2){
                if(key != 0){
                    if(data_land.muc_2[0].is_check == true){
                        $(".land_first_case").show();
                        $(".land_second_case").hide();
                        phan_2+='<div class="first_land_info"><p>a. Thừa đất số: <span class="land_number">'+data_land.muc_2[key].land_number+'</span></p><p>tờ bản đồ số: <span class="land_map_number">'+data_land.muc_2[key].land_map_number+'</span></p></div><div class="first_land_info"><p>b. Diện tích: <span class="land_area">'+data_land.muc_2[key].land_area+'</span></p><p>c. Loại đất: <span class="land_class">'+data_land.muc_2[key].land_class+'</span></p></div><p>d. Thời hạn sử dụng: <span class="land_use-date">'+data_land.muc_2[key].land_use_date+'</span></p><p>đ. Hình thức sử dụng: <span class="land_use">'+data_land.muc_2[key].land_use+'</span></p><p>e. Địa chỉ: <span class="land_address">'+data_land.muc_2[key].land_address+'</span></p><p>g. Nguồn gốc sử dụng đất: <span class="land_purpose">'+data_land.muc_2[key].land_purpose+'</span></p>'
                    }
                    else{
                        $(".land_first_case").hide();
                        $(".land_second_case").show();
                        phan_2+='<tr><td><p>'+data_land.muc_2[key].land_number+'</p></td><td><p>'+data_land.muc_2[key].land_map_number+'</p></td><td><p>'+data_land.muc_2[key].land_area+'</p></td><td><p>'+data_land.muc_2[key].land_class+'</p></td><td><p>'+data_land.muc_2[key].land_use_date+'</p></td><td><p>'+data_land.muc_2[key].land_use+'</p></td><td><p>'+data_land.muc_2[key].land_purpose+'</p></td><td><p>'+data_land.muc_2[key].land_address+'</p></td></tr>'
                        $('.land_second_case').append(phan_2);
                    }
                }
            }
            if(data_land.muc_2[0].is_check == true){
                $(".land_first_case").append(phan_2);
            }else{
                $(".land_first_case").append(table+phan_2+"</tbody></table>");
            }

            //load muc 3
            var phan_3 = '';
            phan_3_c = '<div class="first_land_info"><p>a. Tên tài sản: <span class="asset_name">'+data_land.muc_3[2].asset_area+'</span></p><p>b. Diện tích xây dựng: <span class="asset_build">'+data_land.muc_3[2].asset_area+'</span></p></div><div class="first_land_info"><p>c. Diện tích sử dụng: <span class="asset_use">'+data_land.muc_3[2].asset_area+'</span></p><p>d. Số tầng: <span class="asset_floor">'+data_land.muc_3[2].asset_area+'</span></p></div><div class="first_land_info"><p>đ. Kết cấu: <span class="asset_structre">'+data_land.muc_3[2].asset_area+'</span></p><p>e. Cấp công trình: <span class="asset_level">'+data_land.muc_3[2].asset_area+'</span></p></div><div class="first_land_info"><p>g. Hình thức sử dụng: <span class="asset_use">'+data_land.muc_3[2].asset_area+'</span></p><p>h. Thời hạn sử dụng: <span class="asset_use">'+data_land.muc_3[2].asset_area+'</span></p></div><p>i. Địa chỉ: <span class="asset_address">'+data_land.muc_3[2].asset_area+'</span></p>';
            for (const key in data_land.muc_3){
                if(key != 0){
                    if(data_land.muc_3[0].is_check == true){
                        $(".table_asset_first").show();
                        $(".table_asset_second").hide();

                        phan_3+='<tr><td><p>'+data_land.muc_3[key].asset_name+'</p></td><td><p>'+data_land.muc_3[key].asset_area+'</p></td><td><p>'+data_land.muc_3[key].asset_area_use+'</p></td><td><p>'+data_land.muc_3[key].asset_number_floor+'</p></td><td><p>'+data_land.muc_3[key].asset_structure+'</p></td><td><p>'+data_land.muc_3[key].asset_level+'</p></td></tr>'
                        
                    }
                    else{
                        $(".table_asset_first").hide();
                        $(".table_asset_second").show();

                        phan_3+='<tr><td><p>'+data_land.muc_3[key].asset_name+'</p></td><td><p>'+data_land.muc_3[key].asset_area+'</p></td><td><p>'+data_land.muc_3[key].asset_area_use+'</p></td><td><p>'+data_land.muc_3[key].asset_number_floor+'</p></td><td><p>'+data_land.muc_3[key].asset_use+'</p></td></tr>'
                        
                    }
                }
            }
            if(data_land.muc_3[0].is_check == true){
                $(".table_asset_first").append(phan_3_c+phan_3);
            }else{
                $(".table_asset_second").append(phan_3_c+phan_3);
            }

            //load muc 4
            var phan_4 = '';
            for (const key in data_land.muc_4){
                phan_4+='<img src="'+data_land.muc_4[key]+'" alt="">';
            }
            $(".image_land").html(phan_4);
        }
        load_data();
    })
</script>
<!-- convert to pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js" ></script>
<script src="/page_print/af.min.js"></script>
 

<script type="text/javascript">
$(document).ready(function($) 
{ 

    $(document).on('click', '.btn_print', function(event) 
    {
        event.preventDefault();

        //credit : https://ekoopmans.github.io/html2pdf.js
        
        var element = document.getElementById('main_content'); 

        //easy
        //html2pdf().from(element).save();

        //custom file name
        // html2pdf().set({filename: 'mau_giay'+js.AutoCode()+'.pdf'}).from(element).save();


        //more custom settings
        var opt = 
        {
          margin:       1,
          filename:     'mau_giay'+js.AutoCode()+'.pdf',
          image:        { type: 'png/jpg/jpeg', quality: 0.98 },
          pagebreak: { mode: 'css', before: '#page2el' },
          html2canvas:  { scale: 2 },
          jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
        };

        // New Promise-based usage:
        html2pdf().set(opt).from(element).save();

         
    });



});
</script>
</html>